<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="initial-scale=1, width=device-width, maximum-scale=1, user-scalable=no">
	<title>注册</title>
	<link rel="stylesheet" type="text/css" href="css/reset.css"/>
	<link rel="stylesheet" type="text/css" href="css/style.css"/>
</head>
<body>
<div class="view-wrapper login-wrapper">
	<div class="login-form-wrapper">
		<ul class="login-form-list">
			<li class="input-row">
				<div class="input-tips-01 border-right">+86</div>
				<input type="text" class="phone" name="phone" id="phone" placeholder="手机号" />
			</li>
			<li class="input-row">
				<img src="images/code@2x.png" class="coed-img" alt="图片验证码" width="82" height="32" />
				<input type="text" id="code" placeholder="请输入图文验证码" />
			</li>
			<li class="input-row">
				<a href="javascript:;" class="send-code" onclick="sendCode(this)">发送</a>
				<input type="number" id="phoneCode" placeholder="请输入短信验证码" />
			</li>
		</ul>
		<div class="sumbit-box">
			<a href="javascript:;" class="registrated-next-btn mt-15" onclick="upData()">下一步</a>
		</div>
	</div>
	<div class="bootm-img">
		<img src="images/logo-bg@2x.png" width="343" height="175"/>
	</div>
</div>

<!--js star-->
<script type="text/javascript" src="js/jquery-3.2.1.js"></script>
<script type="text/javascript" src="js/msg.js"></script>
<script type="text/javascript">
	//正则判断手机号码
    function phoneNum(num){
        return /^0?1[3|4|5|7|8][0-9]\d{8}$/.test(num);
    };
    
    //发送验证码
    var hasCode = false;
    function sendCode(obj){
    	if(hasCode){
			return false;
		}
    	var phone = $('#phone').val();
    	if(phone==''){
			$.msg({msg:'请输入手机号码！'});
			return false;
		}else {
			if(!phoneNum(phone)) {
				$.msg({msg:'手机号码不正确！'});
				return false;
			}
		}
		var wait = 60;
		hasCode = true;
		var interval = setInterval(function (){
			wait--;
			$(obj).html(wait+'s');
			if(wait < 0){
				clearInterval(interval);
				$(obj).html('发送');
				hasCode = false;
			}
		},1000)
    }
    
    //提交
	function upData(){
		var phone = $('#phone').val();
		var code = $('#code').val();
		var phoneCode = $('#phoneCode').val();
		if(phone==''){
			$.msg({msg:'请输入手机号码！'});
			return false;
		}else {
			if(!phoneNum(phone)) {
				$.msg({msg:'手机号码不正确！'});
				return false;
			}
		}
		if(code==''){
			$.msg({msg:'请输入图形验证码！'});
			return false;
		}
		if(phoneCode==''){
			$.msg({msg:'请输入短信验证码！'});
			return false;
		}
		
		//提交表单操作
	}
</script>
<!--js end-->
</body>
</html>
